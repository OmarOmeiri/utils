{"version":3,"file":"date.js","sourceRoot":"","sources":["../../../src/Date/date.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Exports all the helper functions related to dates\n * @module DateUtils\n * @category Date\n */\nimport dayjs, { OpUnitType, QUnitType } from 'dayjs';\nimport dayjsBusinessTime from 'dayjs-business-time';\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter';\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore';\nimport tz from 'dayjs/plugin/timezone';\nimport utc from 'dayjs/plugin/utc';\nimport customParseFormat from 'dayjs/plugin/customParseFormat';\nimport { getRandomInt } from '../Math/mathFuncs';\n\nimport './holidays';\n\ndayjs.extend(dayjsBusinessTime);\ndayjs.extend(utc);\ndayjs.extend(tz);\ndayjs.extend(isSameOrAfter);\ndayjs.extend(isSameOrBefore);\ndayjs.extend(customParseFormat);\n\ntype dateFormats =\n| 'DD/MM/YYYY'\n| 'DD-MM-YYYY'\n| 'YYYY-MM-DD'\n| 'YYYY/MM/DD'\n\nexport enum dateComparison {\n  gt = '>',\n  gte = '>=',\n  lt = '<',\n  lte = '<=',\n  eq = '=',\n}\n\n/**\n * Validates a date\n * @param date\n * @param format eg: ('DD-MM-YYY' | 'YYYY/MM/DD')\n * @returns\n */\nexport function validateDate(date: Date | dayjs.Dayjs, strict?: boolean, format?: undefined): boolean\nexport function validateDate(date: string, strict: true, format: dateFormats): boolean\nexport function validateDate(date: string, strict: false, format?: dateFormats): boolean\n// eslint-disable-next-line require-jsdoc\nexport function validateDate(date: string | Date | dayjs.Dayjs, strict?: boolean, format?: dateFormats): boolean {\n  return dayjs(date, format, strict).isValid();\n}\n\n/**\n * Formats a date to string\n * @param date\n * @param formatIn\n * @param formatOut\n * @returns\n */\nexport function formatDate(date: dayjs.Dayjs | Date, formatOut: dateFormats): string\nexport function formatDate(date: string, formatIn: dateFormats, formatOut: dateFormats): string\n// eslint-disable-next-line require-jsdoc\nexport function formatDate(date: string | Date | dayjs.Dayjs, formatIn: dateFormats, formatOut?: dateFormats): string {\n  if (dayjs.isDayjs(date)) return date.format(formatIn ?? formatOut);\n  if (date instanceof Date) return dayjs(date).format(formatIn ?? formatOut);\n  return dayjs(date, formatIn).format(formatOut);\n}\n\n/**\n * Compares two dates.\n * Can be string, Dates or dayjs Objects.\n *\n * @param date1\n * @param date2\n * @param comparison The type of comparison. See {@link dateComparison}\n * @param gran granularity. Check {@link dayjs.OpUnitType}\n * @param format supplied date format {@link dateFormats}\n * @returns\n */\nexport const compareDate = (\n  date1: string | Date | dayjs.Dayjs,\n  date2: string | Date | dayjs.Dayjs,\n  comparison: dateComparison,\n  gran: dayjs.OpUnitType,\n  format: 'YYYY-MM-DD',\n): boolean => {\n  let dt1: dayjs.Dayjs;\n  let dt2: dayjs.Dayjs;\n\n  if (!dayjs.isDayjs(date1)) dt1 = dayjs(date1, format);\n  else dt1 = date1;\n\n  if (!dayjs.isDayjs(date2)) dt2 = dayjs(date2, format);\n  else dt2 = date2;\n\n  if (comparison === dateComparison.gt) {\n    return dt1.isAfter(dt2, gran);\n  }\n\n  if (comparison === dateComparison.gte) {\n    dt1.isSameOrAfter(dt2, gran);\n  }\n\n  if (comparison === dateComparison.lt) {\n    return dt1.isBefore(dt2, gran);\n  }\n\n  if (comparison === dateComparison.lte) {\n    return dt1.isSameOrBefore(dt2, gran);\n  }\n\n  return dt1.isSame(dt2, gran);\n};\n\n/**\n  * This function adds a given amount of business days to a date\n  * @param date the date\n  * @param  length number of days to add\n  */\nexport function manipulateBusinessDays(date: Date, length: number): Date {\n  return dayjs(date).addBusinessTime(length, 'days').toDate();\n}\n\n/**\n * Gets the last weekend of the current or passed date\n *\n * @param [endOfWeekend] Optional - If true, returns the last sunday (default = true)\n/ */\nexport function getLastWeekend(): Date\nexport function getLastWeekend({ date, endOfWeekend }: {date?: Date, endOfWeekend?: true}): Date\nexport function getLastWeekend({ date, endOfWeekend }: {date?: Date, endOfWeekend?: false}): [Date, Date]\n// eslint-disable-next-line require-jsdoc\nexport function getLastWeekend({ date, endOfWeekend = true }: ({date?: Date | undefined, endOfWeekend?: boolean} | undefined) = {}): Date | [Date, Date] {\n  const dt = date || new Date();\n  const dtNoTz = new Date(dt.getFullYear(), dt.getMonth(), dt.getDate());\n  const lastSunday = new Date(dtNoTz.setDate(dtNoTz.getDate() - dtNoTz.getDay()));\n  if (endOfWeekend) return lastSunday;\n  const lastSaturday = new Date(dtNoTz.setDate(dtNoTz.getDate() - dtNoTz.getDay() - 1));\n  return [lastSaturday, lastSunday];\n}\n\n/**\n * Checks if a date is a business day\n * @param date\n * @returns\n */\nexport function isBusinessDay(date: Date): boolean {\n  return dayjs(date).isBusinessDay();\n}\n/**\n * Return the next or previuos business day.\n *\n * IMPORTANT: If TODAY is a business day, it will return TODAY.\n * @param day\n * @param nextOrPrevious\n */\nexport function getBusinessDay(day: Date, nextOrPrevious: 'next' | 'prev'): Date {\n  if (isBusinessDay(day)) return dayjs(day).startOf('day').toDate();\n  const dt = new Date(day.getTime());\n  const incr = nextOrPrevious === 'next' ? 1 : -1;\n  while (!isBusinessDay(dt)) {\n    dt.setDate(dt.getDate() + incr);\n  }\n  return dayjs(dt).startOf('day').toDate();\n}\n\n/**\n * Function fills missing dates in an array of dates\n *\n * IMPORTANT!!\n *\n * THIS WILL RESET THE \"HH:MM:SS\" OF THE DATE TO \"00:00:00\"\n * @param dates\n * @returns\n */\nexport function fillMissingDays(dates: Date[], sort: 'asc' | 'desc'): Date[] {\n  const sortedDates = dates.sort((a, b) => a.getTime() - b.getTime());\n  const startDate = dayjs(sortedDates[0]);\n  const endDate = dayjs(sortedDates[sortedDates.length - 1]);\n\n  const missingDates = [];\n  let currentDate = startDate.startOf('day');\n\n  while (currentDate.isSameOrBefore(endDate)) {\n    missingDates.push(currentDate.toDate());\n    currentDate = currentDate.add(1, 'day').startOf('day');\n  }\n\n  return sort === 'asc' ? missingDates : missingDates.reverse();\n}\n\n/**\n * Returns the difference bwtewwn dates\n * @param start\n * @param end\n * @param unit\n * @returns\n */\nexport function diffDate(start: Date | dayjs.Dayjs, end: Date | dayjs.Dayjs, unit: QUnitType | OpUnitType): number {\n  const date1 = dayjs(start);\n  const date2 = dayjs(end);\n  return date1.diff(date2, unit);\n}\n\ntype ObjWithDate<K extends string> = {\n  [K: string]: unknown | Date,\n} & {\n  [DK in K]: Date\n}\n\n/** */\nfunction push<K extends string, O extends ObjWithDate<K>>(\n  last: O,\n  curr: O,\n  dateKey: K,\n  fillWith: Omit<O, K>,\n) {\n  const arr: (O & {\n    [x: string]: Date;\n  })[] = [];\n  const nextDate = dayjs(curr[dateKey]).startOf('day');\n  let currDate = dayjs(last[dateKey]).startOf('day');\n\n  while (diffDate(nextDate, currDate, 'day') > 1) {\n    currDate = dayjs(currDate).startOf('day').add(1, 'day').startOf('day');\n    const newObj = { [dateKey]: currDate.toDate(), ...fillWith } as O;\n    arr.push(newObj);\n  }\n  return arr;\n}\n\n/**\n * Function fills missing dates in an array of dates\n * @param dates\n * @returns\n */\nexport function fillMissingDaysObj<K extends string, O extends ObjWithDate<K>>(\n  objArr: O[],\n  dateKey: K,\n  sort: 'asc' | 'desc',\n  fillWith: Omit<O, K>,\n): O[] {\n  const sorted = objArr.sort((a, b) => a[dateKey].getTime() - b[dateKey].getTime());\n\n  const filled = sorted.reduce((obj, curr, i) => {\n    if (!i) return [curr];\n    const last = obj[obj.length - 1];\n    return [\n      ...obj,\n      ...push(last, curr, dateKey, fillWith),\n      curr,\n    ];\n  }, [] as O[]);\n\n  return sort === 'asc' ? filled : filled.reverse();\n}\n\n/**\n * Excludes weekends from a given array of dates\n * @param dates\n * @returns\n */\nexport function excludeWeekends(dates: Date[]): Date[] {\n  return dates.filter((date) => {\n    const day = date.getDay();\n    return day !== 0 && day !== 6;\n  });\n}\n\n/**\n * Returns the min and max dates from an array of dates\n * @param dates\n * @returns\n */\nexport function minMaxDate(dates: Date[]): {\n  min: Date,\n  max: Date,\n} {\n  const times = dates.map((date) => date.getTime());\n  return {\n    min: new Date(Math.min(...times)),\n    max: new Date(Math.max(...times)),\n  };\n}\n\n/**\n * Generates a random date in a range\n */\nexport function randomDate({\n  yearRng,\n  businessDay,\n}: {\n  yearRng?: [number, number],\n  businessDay?: boolean,\n} = {}): Date {\n  const yRng = yearRng || [1970, new Date().getFullYear()];\n  const mRng = [0, 11];\n  const dRng = [1, 31];\n\n  if (yRng[0] > yRng[1]) throw new Error('yearRng[0] must be less than or equal to yearRng[1]');\n  if (mRng[0] > mRng[1]) throw new Error('monthRng[0] must be less than or equal to monthRng[1]');\n  if (dRng[0] > dRng[1]) throw new Error('dayRng[0] must be less than or equal to dayRng[1]');\n\n  let dt: Date | undefined;\n\n  while (\n    !dt\n    || !validateDate(dt)\n    || (businessDay ? !isBusinessDay(dt) : false)\n  ) {\n    const year = getRandomInt(yRng[0], yRng[1] + 1);\n    const month = getRandomInt(mRng[0], mRng[1] + 1);\n    const day = Math.min(getRandomInt(dRng[0], dRng[1]), dayjs(`${year}-${month}`).daysInMonth());\n    dt = new Date(\n      year,\n      month,\n      day,\n    );\n  }\n  return dt;\n}\n\n/**\n *\n * @param value\n * @param strict Also validates the date\n */\nexport function isDate(value: Date, strict: boolean, format?: undefined): value is Date\nexport function isDate(value: unknown, strict?: false, format?: undefined): value is Date\nexport function isDate(value: unknown, strict: true, format: dateFormats): value is Date\n// eslint-disable-next-line require-jsdoc\nexport function isDate(value: unknown, strict?: boolean, format?: dateFormats): value is Date {\n  if (typeof value === 'string') return dayjs(value, format, strict).isValid();\n  return value instanceof Date && dayjs(value, format, strict).isValid();\n}\n\n/**\n * Checks if a Date object is instanceof `Invalid Date`\n *\n * IMPORTANT!\n *\n * THIS IS NOT DATE VALIDATION\n */\nexport function isInstanceofDate(value: unknown): value is Date {\n  return value instanceof Date && Number.isFinite(Number(value));\n}\n\n/**\n * Parsed dates in json objects\n */\nexport function dateTimeReviver(_: string, value: any): any {\n  if (typeof value === 'string') {\n    try {\n      const dt = new Date(value);\n      if (!Number.isNaN(dt.getTime())) return dt;\n      return value;\n    } catch (e) {\n      return value;\n    }\n  }\n  return value;\n}\n\n/**\n * Gets the quarter of year from date\n * @param date\n * @returns\n */\nexport function getQuarter(date = new Date()): number {\n  return Math.floor(date.getMonth() / 3 + 1);\n}\n"]}