{"version":3,"file":"profitability.js","sourceRoot":"","sources":["../../../../src/Fin/ratios/profitability.ts"],"names":[],"mappings":"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","sourcesContent":["import { isNullOrUndefined } from '../../Misc';\n\ntype NullOrUndefNum = null | undefined | number;\n\nexport type RatiosROSParams = {\n  operatingIncome: NullOrUndefNum,\n  sales: NullOrUndefNum,\n}\n\n/**\n * Return On Sales / Operating Margin (ROS) (higher is better)\n *\n * Return on sales (ROS) is a ratio used to evaluate a company's operational efficiency.\n * This measure provides insight into how much profit is being produced per dollar of sales.\n * An increasing ROS indicates that a company is improving efficiency, while a decreasing ROS could signal impending financial troubles.\n * ROS is closely related to a firm's operating profit margin.\n *\n * ROS <- operating_income / total_revenue\n */\nexport const RatiosROS = ({\n  operatingIncome,\n  sales,\n}:RatiosROSParams): number | null => {\n  if (\n    !sales\n    || isNullOrUndefined(operatingIncome)\n  ) return null;\n  return sales > 0\n    ? operatingIncome / sales\n    : Math.abs(operatingIncome / sales) * -1;\n};\n\nexport type RatiosGMParams = {\n  revenue: NullOrUndefNum,\n  COGS: NullOrUndefNum,\n}\n/**\n * Gross Margin (higher is better)\n *\n * A company’s gross margin is the profitability percentage of its generated revenues.\n *\n * GM <- (Revenue - COGS) / Revenue\n */\nexport const RatiosGM = ({\n  revenue,\n  COGS,\n}: RatiosGMParams): number | null => {\n  if (\n    isNullOrUndefined(revenue)\n    || isNullOrUndefined(COGS)\n  ) return null;\n  if (revenue === 0 && COGS === 0) return null;\n  const GM = Math.abs((revenue - Math.abs(COGS)) / revenue);\n  return revenue < 0\n    ? GM * -1\n    : GM;\n};\n\nexport type RatiosNetMarginParams = {\n  revenue: NullOrUndefNum,\n  netIncome: NullOrUndefNum,\n}\n\n/**\n * Net Margin (higher is better)\n *\n *\n * NM <- Net Profit / Net Revenue\n */\nexport const RatiosNetMargin = ({\n  revenue,\n  netIncome,\n}: RatiosNetMarginParams): number | null => {\n  if (\n    !revenue\n    || !netIncome\n  ) return null;\n  const NM = netIncome / revenue;\n  return revenue > 0\n    ? NM\n    : Math.abs(NM) * -1;\n};\n\nexport type RatiosEBITDAMarginParams = {\n  EBITDA: NullOrUndefNum,\n  revenue: NullOrUndefNum,\n}\n/**\n * EBITDA Margin (higher is better)\n *\n * The EBITDA margin is a measure of a company's operating profit as a percentage of its revenue.\n *\n * EBITDA_M <- EBITDA / Total Revenue\n */\nexport const RatiosEBITDAMargin = ({\n  EBITDA,\n  revenue,\n}: RatiosEBITDAMarginParams): number | null => {\n  if (\n    !EBITDA\n    || !revenue\n  ) return null;\n  const res = Math.abs(EBITDA) / Math.abs(revenue);\n  return revenue > 0\n    ? res\n    : Math.abs(res) * -1;\n};\n\nexport type RatiosEBITMarginParams = {\n  EBIT: NullOrUndefNum,\n  revenue: NullOrUndefNum,\n}\n\n/**\n * EBIT Margin (higher is better)\n *\n * The EBIT margin is a measure of a company's operating profit as a percentage of its revenue.\n *\n * EBIT_M <- EBIT / Total Revenue\n */\nexport const RatiosEBITMargin = ({\n  EBIT,\n  revenue,\n}: RatiosEBITMarginParams): number | null => {\n  if (\n    isNullOrUndefined(EBIT)\n    || !revenue\n  ) return null;\n  const res = Math.abs(EBIT) / Math.abs(revenue);\n  return revenue > 0\n    ? res\n    : Math.abs(res) * -1;\n};\n\nexport type RatiosROAParams = {\n  netIncome: NullOrUndefNum,\n  totalAssets: NullOrUndefNum,\n}\n/**\n * Return on Assets (ROA) (higher is better)\n *\n * O retorno sobre os ativos ou Return on Assets, é um indicador de rentabilidade,\n * que calcula a capacidade de uma empresa gerar lucro a partir dos seus ativos,\n * além de indiretamente, indicar a eficiência dos seus gestores.\n *\n * ROA <- Net Income / total Assets\n */\nexport const RatiosROA = ({\n  netIncome,\n  totalAssets,\n}:RatiosROAParams): number | null => {\n  if (\n    isNullOrUndefined(netIncome)\n    || isNullOrUndefined(totalAssets)\n  ) return null;\n  return netIncome / totalAssets;\n};\n\nexport type RatiosROCEParams = {\n  EBIT: NullOrUndefNum,\n  totalAssets: NullOrUndefNum,\n  currentLiabilities: NullOrUndefNum\n}\n\n/**\n * Return On Capital Employed (ROCE) (higher is better)\n *\n * Return on capital employed (ROCE) is a financial ratio that can be used to assess a company's profitability and capital efficiency.\n * In other words, this ratio can help to understand how well a company is generating profits from its capital as it is put to use.\n *\n * ROCE <- operating_income / (total_assets - current_liabilities)\n */\nexport const RatiosROCE = ({\n  EBIT,\n  totalAssets,\n  currentLiabilities,\n}:RatiosROCEParams): number | null => {\n  if (\n    isNullOrUndefined(EBIT)\n    || isNullOrUndefined(totalAssets)\n    || isNullOrUndefined(currentLiabilities)\n  ) return null;\n  return EBIT / (Math.abs(totalAssets) - Math.abs(currentLiabilities));\n};\n\nexport type RatiosROEParams = {\n  netIncome: NullOrUndefNum,\n  shareholdersEquity: NullOrUndefNum,\n}\n/**\n  * Return on Equity (ROE) (higher is better)\n  *\n  * Mede a capacidade de agregar valor de uma empresa a partir de seus próprios recursos e do dinheiro de investidores.\n  *\n  * ROE <-  net_income / Net Asset (Patrimonio líquido)\n  */\nexport const RatiosROE = ({\n  netIncome,\n  shareholdersEquity,\n}:RatiosROEParams): number | null => {\n  if (\n    isNullOrUndefined(netIncome)\n    || isNullOrUndefined(shareholdersEquity)\n  ) return null;\n  const res = Math.abs(netIncome) / Math.abs(shareholdersEquity);\n  return shareholdersEquity > 0\n    ? res\n    : Math.abs(res) * -1;\n};\n\nexport type RatiosROICParams = {\n  operatingIncome: NullOrUndefNum,\n  taxes: NullOrUndefNum,\n  totalDebt: NullOrUndefNum,\n  shareholdersEquity: NullOrUndefNum\n}\n/**\n * Return On Invested Capital (ROIC) (higher is better)\n *\n * Analysts use the return on invested capital (ROIC) metric to evaluate a company's capital allocation decisions.\n * In particular, it's common to use ROIC in comparison with a company's weighted average cost of capital (WACC).\n *\n * In general, if a company has an ROIC higher than its WACC,\n * it has a strong economic moat and is generating a positive return on its investments.\n * On the contrary, if a company has more to access funding than it can earn on new investments,\n * the company will struggle to generate strong shareholder returns.\n *\n * ROIC is useful both as a standalone metric and to compare companies within the same industry.\n * If one firm consistently earns higher returns than its peers, it will likely be able to capture market share over time.\n *\n * An ROIC higher than the cost of capital means a company is healthy and growing,\n * while an ROIC lower than the cost of capital suggests an unsustainable business model.\n *\n * ROIC <- NOPAT / Invested Capital\n */\nexport const RatiosROIC = ({\n  operatingIncome,\n  taxes,\n  totalDebt,\n  shareholdersEquity,\n}:RatiosROICParams): number | null => {\n  if (\n    isNullOrUndefined(operatingIncome)\n    || isNullOrUndefined(totalDebt)\n    || isNullOrUndefined(shareholdersEquity)\n    || isNullOrUndefined(taxes)\n    || (totalDebt + shareholdersEquity) === 0\n  ) return null;\n  const roic = (operatingIncome - Math.abs(taxes)) / (Math.abs(totalDebt) + Math.abs(shareholdersEquity));\n  return shareholdersEquity < 0\n    ? roic * -1\n    : roic;\n};\n"]}