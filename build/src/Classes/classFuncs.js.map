{"version":3,"file":"classFuncs.js","sourceRoot":"","sources":["../../../src/Classes/classFuncs.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable @typescript-eslint/ban-types */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/**\n * Classes ultility functions\n * @module ClassUtils\n * @category Classes\n */\n\n/**\n * Lists all function names in a class.\n * @param cls some class\n * @returns\n */\nexport function getAllFuncs(cls: Class): string[] {\n  return Object.getOwnPropertyNames(Object.getPrototypeOf(cls));\n}\n\n/**\n * Checks if an object is a class\n * @param obj\n * @returns\n */\nexport function isClass(obj: any): boolean {\n  if (obj == null || typeof obj === 'undefined') { return false; }\n  const isCtorClass = obj.constructor\n      && obj.constructor.toString().substring(0, 5) === 'class';\n  const isNativeCtorClass = obj.constructor\n                                && obj.constructor.name !== 'Function'\n                                && obj.constructor.name in global;\n  if (obj.prototype === undefined) {\n    return isCtorClass || isNativeCtorClass;\n  }\n  const isPrototypeCtorClass = obj.prototype.constructor\n      && obj.prototype.constructor.toString\n      && obj.prototype.constructor.toString().substring(0, 5) === 'class';\n\n  const isNativePrototypeCtorClass = obj.prototype.constructor.name in global && (\n    (global as any)[obj.prototype.constructor.name] === obj.constructor\n          || (global as any)[obj.prototype.constructor.name] === obj\n  );\n  return isCtorClass || isPrototypeCtorClass || isNativeCtorClass || isNativePrototypeCtorClass;\n}\n\n/**\n * Returns an array of method names\n * @param cls\n */\nexport function getMethodNames<C extends Class>(cls: C): (keyof C['prototype'])[]\nexport function getMethodNames<C extends {}>(cls: C): (keyof C)[]\n// @ts-ignore\nexport function getMethodNames<C extends Class | {}>(cls: C): (keyof C | keyof C['prototype'])[] {\n  if ('prototype' in cls) {\n    return Object.getOwnPropertyNames(cls?.prototype).reduce((arr, k) => {\n      if (k !== 'constructor') {\n        // @ts-ignore\n        return [...arr, k as keyof C['prototype']];\n      }\n      return arr;\n      // @ts-ignore\n    }, [] as (keyof C['prototype'])[]);\n  }\n  return Object.getOwnPropertyNames(Object.getPrototypeOf(cls)).reduce((arr, k) => {\n    if (k !== 'constructor') {\n      return [...arr, k as keyof C];\n    }\n    return arr;\n  }, [] as (keyof C)[]);\n}\n\nexport type ProxiedClass<\n  T extends Record<string, any>,\n  E extends Record<string, any>,\n> = {\n  [KT in keyof T]: T[KT]\n} & {\n  [KE in keyof E]: E[KE]\n}\n\n/**\n * Merges two classes\n * @param target\n * @param extension\n * @returns\n */\nexport function ProxyClass<\n  T extends Record<string, any>,\n  E extends Record<string, any>,\n>(\n  target: T,\n  extension: E,\n): ProxiedClass<T, E> {\n  const extended = new Proxy(target, {\n    get(t, prop: string) {\n      if (prop === '__extension__') return extension;\n      const value = t[prop] || extension[prop];\n      if (value instanceof Function) {\n        return function (...args: any[]) {\n          return value.apply(prop in target ? target : extension, args as any);\n        };\n      }\n      return value;\n    },\n    ownKeys(t) {\n      return Array.from(new Set([\n        ...Object.getOwnPropertyNames(t),\n        ...Object.getOwnPropertyNames(extension),\n        ...Object.getOwnPropertyNames(Object.getPrototypeOf(t)),\n        ...Object.getOwnPropertyNames(Object.getPrototypeOf(extension)),\n      ])).filter((k) => k !== 'constructor');\n    },\n    getOwnPropertyDescriptor(t, prop) {\n      return Object.getOwnPropertyDescriptor(\n        t[prop as keyof T] ? t : extension,\n        prop,\n      ) || Object.getOwnPropertyDescriptor(\n        Object.getPrototypeOf(t[prop as keyof T] ? t : extension),\n        prop,\n      );\n    },\n  });\n\n  return extended as ProxiedClass<T, E>;\n}\n"]}